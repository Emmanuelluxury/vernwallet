<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bitcoin-Starknet Bridge Dashboard</title>
    <link rel="icon" href="../images/image.png" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #7c3aed;
            --primary-dark: #6d28d9;
            --primary-light: #8b5cf6;
            --secondary: #10b981;
            --secondary-dark: #059669;
            --dark: #0f172a;
            --darker: #0a0f1c;
            --light: #f9fafb;
            --gray: #94a3b8;
            --gray-light: #cbd5e1;
            --danger: #ef4444;
            --warning: #f59e0b;
            --info: #3b82f6;
            --transition: all 0.3s ease;
            --card-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            --gradient: linear-gradient(135deg, var(--primary), var(--secondary));
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
        
        body {
            background-color: var(--darker);
            color: var(--light);
            line-height: 1.6;
            min-height: 100vh;
            padding: 0;
            margin: 0;
        }
        
        .app-container {
            display: flex;
            min-height: 100vh;
        }
        
        /* Sidebar Navigation */
        .sidebar {
            width: 280px;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 255, 255, 0.05);
            padding: 25px 0;
            display: flex;
            flex-direction: column;
            transition: var(--transition);
        }
        
        .sidebar-header {
            padding: 0 25px 25px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            margin-bottom: 25px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 800;
            font-size: 1.4rem;
            color: white;
            text-decoration: none;
        }
        
        .logo-icon {
            color: var(--primary);
            font-size: 1.8rem;
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 9px 20px;
            color: var(--gray);
            text-decoration: none;
            transition: var(--transition);
            border-left: 4px solid transparent;
            margin: 5px 0;
        }
        
        .nav-item:hover, .nav-item.active {
            background: rgba(124, 58, 237, 0.1);
            color: white;
            border-left-color: var(--primary);
        }
        
        .nav-item i {
            width: 20px;
            text-align: center;
            font-size: 1.1rem;
        }
        
        /* User Profile Section */
        .user-profile {
            padding: 20px;
            margin-top: auto;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 1.2rem;
            position: relative;
            overflow: hidden;
        }
        
        .user-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .user-info {
            flex: 1;
        }
        
        .user-name {
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .user-role {
            font-size: 0.8rem;
            color: var(--gray);
        }
        
        /* Main Content */
        .main-content {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            background: rgba(15, 23, 42, 0.5);
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .header-title {
            font-size: 2rem;
            font-weight: 700;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .header-actions {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .notification-bell {
            position: relative;
            cursor: pointer;
            padding: 10px;
            border-radius: 8px;
            transition: var(--transition);
        }

        .notification-bell:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .notification-badge {
            position: absolute;
            top: 5px;
            right: 5px;
            background: var(--danger);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        .notification-panel {
            position: absolute;
            top: 60px;
            right: 0;
            width: 350px;
            background: var(--darker);
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: none;
            z-index: 1000;
            max-height: 400px;
            overflow-y: auto;
        }

        .notification-header {
            padding: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .notification-item {
            padding: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            cursor: pointer;
            transition: var(--transition);
        }

        .notification-item:hover {
            background: rgba(255, 255, 255, 0.03);
        }

        .notification-item.unread {
            background: rgba(124, 58, 237, 0.1);
            border-left: 3px solid var(--primary);
        }

        .notification-title {
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }

        .notification-message {
            font-size: 0.8rem;
            color: var(--gray);
            margin-bottom: 5px;
        }

        .notification-time {
            font-size: 0.7rem;
            color: var(--gray-light);
        }

        /* Loading States */
        .loading {
            position: relative;
            pointer-events: none;
            opacity: 0.7;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            margin: -10px 0 0 -10px;
            border: 2px solid var(--primary);
            border-top: 2px solid transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            z-index: 10;
        }

        .error-message {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid var(--danger);
            border-radius: 8px;
            padding: 12px;
            margin: 10px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .error-message i {
            color: var(--danger);
        }

        .retry-button {
            background: var(--warning);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
            margin-left: auto;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 12px 20px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(124, 58, 237, 0.4);
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .btn-sm {
            padding: 8px 15px;
            font-size: 0.8rem;
        }
        
        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: rgba(30, 41, 59, 0.6);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 25px;
            box-shadow: var(--card-shadow);
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: var(--transition);
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }
        
        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .stat-title {
            font-size: 0.9rem;
            color: var(--gray);
            font-weight: 600;
        }
        
        .stat-icon {
            width: 45px;
            height: 45px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
        }
        
        .bitcoin-icon {
            background: rgba(247, 147, 26, 0.2);
            color: #f7931a;
        }
        
        .starknet-icon {
            background: rgba(124, 58, 237, 0.2);
            color: var(--primary);
        }
        
        .proof-icon {
            background: rgba(16, 185, 129, 0.2);
            color: var(--secondary);
        }
        
        .operator-icon {
            background: rgba(59, 130, 246, 0.2);
            color: var(--info);
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 5px;
        }
        
        .stat-change {
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .positive {
            color: var(--secondary);
        }
        
        .negative {
            color: var(--danger);
        }
        
        /* Cards */
        .card {
            background: rgba(30, 41, 59, 0.6);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 25px;
            box-shadow: var(--card-shadow);
            border: 1px solid rgba(255, 255, 255, 0.05);
            margin-bottom: 25px;
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .card-title {
            font-size: 1.3rem;
            font-weight: 600;
        }
        
        .card-actions {
            display: flex;
            gap: 10px;
        }
        
        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 25px;
        }
        
        @media (max-width: 1200px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* Progress Bars */
        .progress-container {
            margin: 18px 0;
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .progress-label {
            font-size: 0.9rem;
            color: var(--gray-light);
        }
        
        .progress-value {
            font-size: 0.9rem;
            font-weight: 600;
        }
        
        .progress-bar {
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            border-radius: 5px;
        }
        
        .progress-bitcoin {
            background: #f7931a;
            width: 75%;
        }
        
        .progress-proof {
            background: var(--secondary);
            width: 60%;
        }
        
        .progress-starknet {
            background: var(--primary);
            width: 45%;
        }
        
        /* Tables */
        .table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .table th {
            text-align: left;
            padding: 15px;
            font-size: 0.9rem;
            color: var(--gray);
            font-weight: 600;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .table td {
            padding: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .table tr:last-child td {
            border-bottom: none;
        }
        
        .table tr:hover {
            background: rgba(255, 255, 255, 0.03);
        }
        
        /* Status Badges */
        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .status-pending {
            background: rgba(245, 158, 11, 0.2);
            color: var(--warning);
        }
        
        .status-completed {
            background: rgba(16, 185, 129, 0.2);
            color: var(--secondary);
        }
        
        .status-failed {
            background: rgba(239, 68, 68, 0.2);
            color: var(--danger);
        }
        
        .status-processing {
            background: rgba(59, 130, 246, 0.2);
            color: var(--info);
        }
        
        /* Operator List */
        .operator-list {
            list-style: none;
        }
        
        .operator-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            cursor: pointer;
            transition: var(--transition);
        }

        .operator-item:hover {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            padding-left: 10px;
            margin-left: -10px;
            margin-right: -10px;
        }
        
        .operator-item:last-child {
            border-bottom: none;
        }
        
        .operator-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: rgba(124, 58, 237, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
            font-size: 1.1rem;
        }
        
        .operator-details {
            flex: 1;
        }
        
        .operator-name {
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .operator-meta {
            font-size: 0.8rem;
            color: var(--gray);
        }
        
        .operator-status {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        
        .status-online {
            background: var(--secondary);
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.2);
        }
        
        .status-offline {
            background: var(--danger);
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.2);
        }
        
        .status-syncing {
            background: var(--warning);
            box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.2);
        }
        
        /* Alerts */
        .alert {
            padding: 18px;
            border-radius: 12px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .alert-info {
            background: rgba(59, 130, 246, 0.2);
            border-left: 4px solid var(--info);
        }
        
        .alert-warning {
            background: rgba(245, 158, 11, 0.2);
            border-left: 4px solid var(--warning);
        }
        
        .alert-icon {
            font-size: 1.5rem;
        }
        
        .alert-content {
            flex: 1;
        }
        
        .alert-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .alert-description {
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        /* Filter Bar */
        .filter-bar {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .filter-select {
            padding: 10px 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: white;
            font-size: 0.9rem;
            cursor: pointer;
        }
        
        /* API Endpoints */
        .endpoint {
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            margin-bottom: 15px;
        }
        
        .endpoint-method {
            display: inline-block;
            padding: 5px 10px;
            background: var(--primary);
            color: white;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-right: 10px;
        }
        
        .endpoint-path {
            font-family: monospace;
            font-size: 0.9rem;
        }
        
        .endpoint-description {
            margin-top: 10px;
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        .code-block {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            font-family: monospace;
            font-size: 0.9rem;
            overflow-x: auto;
            margin: 15px 0;
        }

        .api-response {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 15px;
            font-family: monospace;
            font-size: 0.9rem;
            border-left: 4px solid var(--secondary);
        }

        .api-response.success {
            border-left-color: var(--secondary);
        }

        .api-response.error {
            border-left-color: var(--danger);
        }

        .response-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-family: 'Inter', sans-serif;
            font-size: 0.9rem;
        }

        /* Mobile Navigation */
        .mobile-nav {
            position: fixed;
            top: 0;
            left: -100%;
            width: 280px;
            height: 100vh;
            background: var(--darker);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 255, 255, 0.05);
            z-index: 1000;
            transition: left 0.3s ease;
            box-shadow: 5px 0 25px rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
        }

        .mobile-nav.active {
            left: 0;
        }

        .mobile-nav-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .mobile-nav-logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 800;
            font-size: 1.2rem;
            color: white;
        }

        .mobile-nav-close {
            background: none;
            border: none;
            color: var(--gray);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: var(--transition);
        }

        .mobile-nav-close:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .mobile-nav-links {
            list-style: none;
            padding: 0;
            margin: 0;
            flex: 1;
        }

        .mobile-nav-item {
            margin: 0;
        }

        .mobile-nav-link {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 20px;
            color: var(--gray);
            text-decoration: none;
            transition: var(--transition);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .mobile-nav-link:hover {
            background: rgba(124, 58, 237, 0.1);
            color: white;
            padding-left: 25px;
        }

        .mobile-nav-item.active .mobile-nav-link {
            background: rgba(124, 58, 237, 0.1);
            color: white;
            border-left: 4px solid var(--primary);
        }

        .mobile-nav-link i {
            width: 20px;
            text-align: center;
            font-size: 1.1rem;
        }

        /* Mobile Navigation Overlay */
        .mobile-nav-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .mobile-nav-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        /* Responsive */
        @media (max-width: 1024px) {
            .sidebar {
                width: 80px;
            }
            
            .nav-item span {
                display: none;
            }
            
            .user-info {
                display: none;
            }
        }
        
        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .header-actions {
                width: 100%;
                justify-content: space-between;
            }
        }
        
        /* Mobile Menu Button */
        .mobile-menu-btn {
            display: none;
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: var(--primary);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: var(--transition);
        }

        .mobile-menu-btn:hover {
            background: var(--primary-dark);
            transform: scale(1.05);
        }

        .mobile-menu-btn:active {
            transform: scale(0.95);
        }

        @media (max-width: 768px) {
            .mobile-menu-btn {
                display: block;
            }

            .sidebar {
                position: fixed;
                left: -280px;
                z-index: 999;
                height: 100%;
            }

            .sidebar.active {
                left: 0;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Mobile Toggle Button -->
        <button class="mobile-menu-btn" id="mobileMenuBtn">
            <i class="fas fa-bars"></i>
        </button>

        <!-- Mobile Navigation Menu -->
        <div class="mobile-nav" id="mobileNav">
            <div class="mobile-nav-header">
                <div class="mobile-nav-logo">
                    <i class="fas fa-link logo-icon"></i>
                    <span>sBTC Relayer</span>
                </div>
                <button class="mobile-nav-close" id="mobileNavClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <ul class="mobile-nav-links">
                <li class="mobile-nav-item active">
                    <a href="#" class="mobile-nav-link">
                        <i class="fas fa-chart-line"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li class="mobile-nav-item">
                    <a href="BitcoinNode.html" class="mobile-nav-link">
                        <i class="fab fa-bitcoin"></i>
                        <span>Bitcoin Node</span>
                    </a>
                </li>
                <li class="mobile-nav-item">
                    <a href="StarknetNode.html" class="mobile-nav-link">
                        <i class="fas fa-layer-group"></i>
                        <span>Starknet Node</span>
                    </a>
                </li>
                <li class="mobile-nav-item">
                    <a href="SPVProofs.html" class="mobile-nav-link">
                        <i class="fas fa-file-contract"></i>
                        <span>SPV Proofs</span>
                    </a>
                </li>
                <li class="mobile-nav-item">
                    <a href="Operators.html" class="mobile-nav-link">
                        <i class="fas fa-server"></i>
                        <span>Operators</span>
                    </a>
                </li>
                <li class="mobile-nav-item">
                    <a href="Security.html" class="mobile-nav-link">
                        <i class="fas fa-shield-alt"></i>
                        <span>Security</span>
                    </a>
                </li>
                <li class="mobile-nav-item">
                    <a href="ApiDocs.html" class="mobile-nav-link">
                        <i class="fas fa-code"></i>
                        <span>API Docs</span>
                    </a>
                </li>
                <li class="mobile-nav-item">
                    <a href="Lock-Screen.html" class="mobile-nav-link">
                        <i class="fas fa-wallet"></i>
                        <span>Wallet</span>
                    </a>
                </li>
                <li class="mobile-nav-item">
                    <a href="Transactions.html" class="mobile-nav-link">
                        <i class="fas fa-exchange-alt"></i>
                        <span>Transactions</span>
                    </a>
                </li>
                <li class="mobile-nav-item">
                    <a href="Settings.html" class="mobile-nav-link">
                        <i class="fas fa-cogs"></i>
                        <span>Settings</span>
                    </a>
                </li>
            </ul>
        </div>
        
        <!-- Sidebar Navigation -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="#" class="logo">
                    <i class="fas fa-link logo-icon"></i>
                    <span>sBTC Relayer</span>
                </a>
            </div>
            
            <a href="#" class="nav-item active">
                <i class="fas fa-chart-line"></i>
                <span>Dashboard</span>
            </a>
            
            <a href="BitcoinNode.html" class="nav-item">
                <i class="fab fa-bitcoin"></i>
                <span>Bitcoin Node</span>
            </a>

            <a href="StarknetNode.html" class="nav-item">
                <i class="fas fa-layer-group"></i>
                <span>Starknet Node</span>
            </a>
            
            <a href="SPVProofs.html" class="nav-item">
                <i class="fas fa-file-contract"></i>
                <span>SPV Proofs</span>
            </a>
            
            <a href="Operators.html" class="nav-item">
                <i class="fas fa-server"></i>
                <span>Operators</span>
            </a>
            
            <a href="Security.html" class="nav-item">
                <i class="fas fa-shield-alt"></i>
                <span>Security</span>
            </a>
            
            <a href="ApiDocs.html" class="nav-item">
                <i class="fas fa-code"></i>
                <span>API Docs</span>
            </a>

            <a href="Lock-Screen.html" class="nav-item">
                <i class="fas fa-wallet"></i>
                <span>Wallet</span>
            </a>

            <a href="Transactions.html" class="nav-item">
                <i class="fas fa-exchange-alt"></i>
                <span>Transactions</span>
            </a>
            
            <a href="Settings.html" class="nav-item">
                <i class="fas fa-cogs"></i>
                <span>Settings</span>
            </a>
            
            <!-- User Profile Section -->
            <div class="user-profile">
                <div class="user-avatar" id="userAvatar">
                    <!-- User's profile picture will appear here -->
                    <span id="avatarInitials">U</span>
                </div>
                <div class="user-info">
                    <div class="user-name" id="userName">User Name</div>
                    <div class="user-role">Registered User</div>
                </div>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="main-content">
            <div class="header">
                <h1 class="header-title">Relayer System Dashboard</h1>
                <div class="header-actions">
                    <div class="notification-bell" onclick="toggleNotifications()">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge" id="notificationBadge" style="display: none;">0</span>
                    </div>
                    <button class="btn btn-secondary" onclick="showSettingsModal()">
                        <i class="fas fa-cog"></i>
                        Settings
                    </button>
                    <button class="btn btn-secondary">
                        <i class="fas fa-sync-alt"></i>
                        Refresh
                    </button>
                    <button class="btn">
                        <i class="fas fa-plus"></i>
                        New Transaction
                    </button>
                </div>

                <!-- Notification Panel -->
                <div class="notification-panel" id="notificationPanel">
                    <div class="notification-header">
                        <h4 style="color: var(--primary); margin: 0; font-size: 1rem;">Notifications</h4>
                        <button onclick="clearAllNotifications()" style="background: none; border: none; color: var(--gray); cursor: pointer; font-size: 0.8rem;">
                            <i class="fas fa-trash"></i> Clear All
                        </button>
                    </div>
                    <div id="notificationList">
                        <!-- Notifications will be populated here -->
                    </div>
                </div>
            </div>
            
            <!-- Stats Grid -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-title">BITCOIN HEIGHT</div>
                        <div class="stat-icon bitcoin-icon">
                            <i class="fab fa-bitcoin"></i>
                        </div>
                    </div>
                    <div class="stat-value">788,543</div>
                    <div class="stat-change positive">
                        <i class="fas fa-arrow-up"></i>
                        +124 blocks
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-title">STARKNET HEADERS</div>
                        <div class="stat-icon starknet-icon">
                            <i class="fas fa-layer-group"></i>
                        </div>
                    </div>
                    <div class="stat-value">788,412</div>
                    <div class="stat-change positive">
                        <i class="fas fa-arrow-up"></i>
                        +98 headers
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-title">SPV PROOFS BUILT</div>
                        <div class="stat-icon proof-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                    </div>
                    <div class="stat-value">12,847</div>
                    <div class="stat-change positive">
                        <i class="fas fa-arrow-up"></i>
                        +43 today
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-title">ACTIVE OPERATORS</div>
                        <div class="stat-icon operator-icon">
                            <i class="fas fa-server"></i>
                        </div>
                    </div>
                    <div class="stat-value">5/7</div>
                    <div class="stat-change negative">
                        <i class="fas fa-arrow-down"></i>
                        -2 offline
                    </div>
                </div>
            </div>
            
            <!-- Alerts Section -->
            <div class="alert alert-warning">
                <div class="alert-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <div class="alert-content">
                    <div class="alert-title">Operator Node 03 Offline</div>
                    <div class="alert-description">Node has been offline for 45 minutes. Check connectivity.</div>
                </div>
            </div>
            
            <div class="alert alert-info">
                <div class="alert-icon">
                    <i class="fas fa-info-circle"></i>
                </div>
                <div class="alert-content">
                    <div class="alert-title">Bitcoin Reorg Detected</div>
                    <div class="alert-description">Reorganization at height 788,541. 2 blocks were orphaned.</div>
                </div>
            </div>
            
            <!-- Dashboard Grid -->
            <div class="dashboard-grid">
                <!-- Left Column -->
                <div>
                    <!-- System Status Card -->
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">System Status</h2>
                            <div class="card-actions">
                                <button class="btn btn-sm btn-secondary">
                                    <i class="fas fa-history"></i>
                                    View Logs
                                </button>
                            </div>
                        </div>
                        
                        <div class="progress-container">
                            <div class="progress-header">
                                <div class="progress-label">Bitcoin Sync</div>
                                <div class="progress-value">100%</div>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill progress-bitcoin"></div>
                            </div>
                        </div>
                        
                        <div class="progress-container">
                            <div class="progress-header">
                                <div class="progress-label">Proof Construction</div>
                                <div class="progress-value">60%</div>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill progress-proof"></div>
                            </div>
                        </div>
                        
                        <div class="progress-container">
                            <div class="progress-header">
                                <div class="progress-label">Starknet Submission</div>
                                <div class="progress-value">45%</div>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill progress-starknet"></div>
                            </div>
                
                            <!-- Role-based content -->
                            <div id="roleBasedContent"></div>
                        </div>
                    </div>
                    
                    <!-- Recent Deposits Card -->
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Recent Deposit Requests</h2>
                            <div class="card-actions">
                                <button class="btn btn-sm btn-secondary">
                                    <i class="fas fa-download"></i>
                                    Export
                                </button>
                            </div>
                        </div>
                        
                        <div class="filter-bar">
                            <div style="display: flex; gap: 10px; align-items: center; flex: 1;">
                                <div style="position: relative; flex: 1;">
                                    <i class="fas fa-search" style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--gray);"></i>
                                    <input type="text" id="searchInput" placeholder="Search by ID, amount, or status..." style="width: 100%; padding: 10px 15px 10px 35px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: white; font-size: 0.9rem;">
                                </div>
                                <select class="filter-select" id="statusFilter">
                                    <option value="all">All Statuses</option>
                                    <option value="pending">Pending</option>
                                    <option value="processing">Processing</option>
                                    <option value="completed">Completed</option>
                                    <option value="failed">Failed</option>
                                </select>

                                <select class="filter-select" id="timeFilter">
                                    <option value="all">All Time</option>
                                    <option value="24h">Last 24 Hours</option>
                                    <option value="7d">Last 7 Days</option>
                                    <option value="30d">Last 30 Days</option>
                                </select>

                                <select class="filter-select" id="amountFilter">
                                    <option value="all">All Amounts</option>
                                    <option value="small">0 - 1 BTC</option>
                                    <option value="medium">1 - 10 BTC</option>
                                    <option value="large">10+ BTC</option>
                                </select>
                            </div>
                        </div>
                        
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Deposit ID</th>
                                    <th>Amount</th>
                                    <th>Status</th>
                                    <th>Created</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>DEP-7832</td>
                                    <td>0.25 BTC</td>
                                    <td>
                                        <span class="status-badge status-completed">
                                            <i class="fas fa-check-circle"></i>
                                            Completed
                                        </span>
                                    </td>
                                    <td>2 hours ago</td>
                                </tr>
                                <tr>
                                    <td>DEP-7831</td>
                                    <td>1.50 BTC</td>
                                    <td>
                                        <span class="status-badge status-processing">
                                            <i class="fas fa-spinner fa-spin"></i>
                                            Building Proof
                                        </span>
                                    </td>
                                    <td>3 hours ago</td>
                                </tr>
                                <tr>
                                    <td>DEP-7830</td>
                                    <td>0.75 BTC</td>
                                    <td>
                                        <span class="status-badge status-pending">
                                            <i class="fas fa-clock"></i>
                                            Waiting for Confirmations
                                        </span>
                                    </td>
                                    <td>5 hours ago</td>
                                </tr>
                                <tr>
                                    <td>DEP-7829</td>
                                    <td>0.10 BTC</td>
                                    <td>
                                        <span class="status-badge status-failed">
                                            <i class="fas fa-exclamation-circle"></i>
                                            Invalid Tx
                                        </span>
                                    </td>
                                    <td>8 hours ago</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- API Endpoints Card -->
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">API Endpoints</h2>
                            <div class="card-actions">
                                <button class="btn btn-sm">
                                    <i class="fas fa-key"></i>
                                    Generate API Key
                                </button>
                            </div>
                        </div>
                        
                        <div class="endpoint">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <span class="endpoint-method">POST</span>
                                    <span class="endpoint-path">/api/deposit_notify</span>
                                </div>
                                <button onclick="testEndpoint('deposit_notify')" class="btn btn-sm" style="background: var(--secondary);">
                                    <i class="fas fa-play"></i> Test
                                </button>
                            </div>
                            <div class="endpoint-description">
                                Notify the relayer of a new Bitcoin deposit. Requires API key authentication.
                            </div>
                            <div class="code-block">
                                {<br>
                                &nbsp;&nbsp;"txid": "abc123...",<br>
                                &nbsp;&nbsp;"amount": 0.5,<br>
                                &nbsp;&nbsp;"user_id": "user_123",<br>
                                &nbsp;&nbsp;"deposit_id": "dep_456"<br>
                                }
                            </div>
                            <div id="response_deposit_notify" class="api-response" style="display: none; margin-top: 15px;"></div>
                        </div>

                        <div class="endpoint">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <span class="endpoint-method">GET</span>
                                    <span class="endpoint-path">/api/deposit_status/{deposit_id}</span>
                                </div>
                                <button onclick="testEndpoint('deposit_status')" class="btn btn-sm" style="background: var(--secondary);">
                                    <i class="fas fa-play"></i> Test
                                </button>
                            </div>
                            <div class="endpoint-description">
                                Check the status of a deposit transaction by its ID.
                            </div>
                            <div id="response_deposit_status" class="api-response" style="display: none; margin-top: 15px;"></div>
                        </div>

                        <div class="endpoint">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <span class="endpoint-method">GET</span>
                                    <span class="endpoint-path">/api/system_health</span>
                                </div>
                                <button onclick="testEndpoint('system_health')" class="btn btn-sm" style="background: var(--secondary);">
                                    <i class="fas fa-play"></i> Test
                                </button>
                            </div>
                            <div class="endpoint-description">
                                Get the current system health status and metrics.
                            </div>
                            <div id="response_system_health" class="api-response" style="display: none; margin-top: 15px;"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Right Column -->
                <div>
                    <!-- Operators Card -->
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Operator Nodes</h2>
                            <div class="card-actions">
                                <button class="btn btn-sm">
                                    <i class="fas fa-plus"></i>
                                    Add Node
                                </button>
                            </div>
                        </div>
                        
                        <ul class="operator-list">
                            <li class="operator-item" onclick="showOperatorDetails(1)">
                                <div class="operator-avatar">
                                    <i class="fas fa-server"></i>
                                </div>
                                <div class="operator-details">
                                    <div class="operator-name">Operator 01</div>
                                    <div class="operator-meta">Bond: 2.5 BTC  Munich</div>
                                </div>
                                <div class="operator-status status-online"></div>
                            </li>

                            <li class="operator-item" onclick="showOperatorDetails(2)">
                                <div class="operator-avatar">
                                    <i class="fas fa-server"></i>
                                </div>
                                <div class="operator-details">
                                    <div class="operator-name">Operator 02</div>
                                    <div class="operator-meta">Bond: 2.0 BTC  Tokyo</div>
                                </div>
                                <div class="operator-status status-online"></div>
                            </li>

                            <li class="operator-item" onclick="showOperatorDetails(3)">
                                <div class="operator-avatar">
                                    <i class="fas fa-server"></i>
                                </div>
                                <div class="operator-details">
                                    <div class="operator-name">Operator 03</div>
                                    <div class="operator-meta">Bond: 1.8 BTC  Virginia</div>
                                </div>
                                <div class="operator-status status-offline"></div>
                            </li>

                            <li class="operator-item" onclick="showOperatorDetails(4)">
                                <div class="operator-avatar">
                                    <i class="fas fa-server"></i>
                                </div>
                                <div class="operator-details">
                                    <div class="operator-name">Operator 04</div>
                                    <div class="operator-meta">Bond: 2.2 BTC  Singapore</div>
                                </div>
                                <div class="operator-status status-syncing"></div>
                            </li>
                        </ul>
                    </div>
                    
                    <!-- Withdrawal Requests Card -->
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Withdrawal Requests</h2>
                            <div class="card-actions">
                                <button class="btn btn-sm btn-secondary">
                                    <i class="fas fa-history"></i>
                                    View All
                                </button>
                            </div>
                        </div>
                        
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Withdrawal ID</th>
                                    <th>Amount</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>WD-4521</td>
                                    <td>0.35 BTC</td>
                                    <td>
                                        <span class="status-badge status-processing">
                                            <i class="fas fa-spinner fa-spin"></i>
                                            Signing
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>WD-4520</td>
                                    <td>1.20 BTC</td>
                                    <td>
                                        <span class="status-badge status-pending">
                                            <i class="fas fa-clock"></i>
                                            Awaiting Signatures
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>WD-4519</td>
                                    <td>0.75 BTC</td>
                                    <td>
                                        <span class="status-badge status-completed">
                                            <i class="fas fa-check-circle"></i>
                                            Completed
                                        </span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- System Info Card -->
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">System Information</h2>
                            <div class="card-actions">
                                <button class="btn btn-sm btn-secondary" onclick="toggleCharts()">
                                    <i class="fas fa-chart-line"></i>
                                    <span id="chartToggleText">Show Charts</span>
                                </button>
                            </div>
                        </div>

                        <div class="progress-container">
                            <div class="progress-header">
                                <div class="progress-label">CPU Usage</div>
                                <div class="progress-value" id="cpuValue">42%</div>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="cpuBar" style="background: var(--info); width: 42%;"></div>
                            </div>
                        </div>

                        <div class="progress-container">
                            <div class="progress-header">
                                <div class="progress-label">Memory Usage</div>
                                <div class="progress-value" id="memValue">64%</div>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="memBar" style="background: var(--warning); width: 64%;"></div>
                            </div>
                        </div>

                        <div class="progress-container">
                            <div class="progress-header">
                                <div class="progress-label">Disk Space</div>
                                <div class="progress-value" id="diskValue">78%</div>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="diskBar" style="background: var(--danger); width: 78%;"></div>
                            </div>
                        </div>

                        <!-- Charts Section -->
                        <div id="chartsSection" style="display: none; margin-top: 25px;">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                                <div>
                                    <h4 style="color: var(--light); margin-bottom: 15px; font-size: 0.9rem;">System Resources (24h)</h4>
                                    <canvas id="systemChart" width="200" height="150"></canvas>
                                </div>
                                <div>
                                    <h4 style="color: var(--light); margin-bottom: 15px; font-size: 0.9rem;">Transaction Volume</h4>
                                    <canvas id="transactionChart" width="200" height="150"></canvas>
                                </div>
                            </div>
                            <div>
                                <h4 style="color: var(--light); margin-bottom: 15px; font-size: 0.9rem;">Network Activity</h4>
                                <canvas id="networkChart" width="400" height="120"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        // Bitcoin-Starknet Bridge Dashboard - Real Data Integration
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize user profile
            updateUserProfile();

            // Initialize data fetching
            fetchBitcoinData();
            fetchStarknetData();
            fetchSystemData();
            fetchTransactionData();

            // Mobile navigation menu toggle
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const mobileNav = document.getElementById('mobileNav');
            const mobileNavClose = document.getElementById('mobileNavClose');
            const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');

            // Create overlay element
            const overlay = document.createElement('div');
            overlay.className = 'mobile-nav-overlay';
            document.body.appendChild(overlay);

            // Toggle mobile menu
            function toggleMobileMenu() {
                mobileNav.classList.toggle('active');
                overlay.classList.toggle('active');
                document.body.style.overflow = mobileNav.classList.contains('active') ? 'hidden' : '';
            }

            // Event listeners
            mobileMenuBtn.addEventListener('click', toggleMobileMenu);
            mobileNavClose.addEventListener('click', toggleMobileMenu);
            overlay.addEventListener('click', toggleMobileMenu);

            // Close menu when clicking on links
            mobileNavLinks.forEach(link => {
                link.addEventListener('click', function() {
                    toggleMobileMenu();
                });
            });

            // Close menu on escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && mobileNav.classList.contains('active')) {
                    toggleMobileMenu();
                }
            });

            // Refresh button functionality
            const refreshBtn = document.querySelector('.header-actions .btn-secondary');
            refreshBtn.addEventListener('click', async function() {
                const icon = this.querySelector('i');
                const originalText = this.innerHTML;
                this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Refreshing...';
                this.disabled = true;
                this.classList.add('loading');

                try {
                    // Refresh all data with timeout
                    const refreshPromise = Promise.all([
                        fetchBitcoinData(),
                        fetchStarknetData(),
                        fetchSystemData(),
                        fetchTransactionData()
                    ]);

                    const timeoutPromise = new Promise((_, reject) =>
                        setTimeout(() => reject(new Error('Refresh timeout')), 30000)
                    );

                    await Promise.race([refreshPromise, timeoutPromise]);

                    // Show success feedback
                    this.innerHTML = '<i class="fas fa-check"></i> Refreshed!';
                    this.classList.remove('loading');
                    setTimeout(() => {
                        this.innerHTML = originalText;
                        this.disabled = false;
                    }, 2000);

                    if (userSettings.notifications.enabled && userSettings.notifications.types.system) {
                        addNotification('Data Refreshed', 'All dashboard data has been updated', 'success');
                    }

                } catch (error) {
                    console.error('Refresh error:', error);
                    this.innerHTML = '<i class="fas fa-exclamation-triangle"></i> Error';
                    this.classList.remove('loading');
                    setTimeout(() => {
                        this.innerHTML = originalText;
                        this.disabled = false;
                    }, 3000);

                    if (userSettings.notifications.enabled && userSettings.notifications.types.system) {
                        addNotification('Refresh Failed', 'Failed to refresh dashboard data', 'error');
                    }
                }
            });

            // New Transaction button
            const newTxBtn = document.querySelector('.header-actions .btn');
            newTxBtn.addEventListener('click', function() {
                showNewTransactionModal();
            });

            // View Logs buttons
            const viewLogsBtns = document.querySelectorAll('.card-actions .btn-secondary');
            viewLogsBtns.forEach(btn => {
                if (btn.textContent.includes('View Logs')) {
                    btn.addEventListener('click', function() {
                        showLogsModal();
                    });
                }
            });

            // Export buttons
            const exportBtns = document.querySelectorAll('.card-actions .btn-secondary');
            exportBtns.forEach(btn => {
                if (btn.textContent.includes('Export')) {
                    btn.addEventListener('click', function() {
                        exportTransactionData();
                    });
                }
            });

            // Add Node buttons
            const addNodeBtns = document.querySelectorAll('.card-actions .btn');
            addNodeBtns.forEach(btn => {
                if (btn.textContent.includes('Add Node')) {
                    btn.addEventListener('click', function() {
                        showAddNodeModal();
                    });
                }
            });

            // Generate API Key button
            const generateApiBtn = document.querySelector('.card-actions .btn');
            if (generateApiBtn && generateApiBtn.textContent.includes('Generate API Key')) {
                generateApiBtn.addEventListener('click', function() {
                    generateApiKey();
                });
            }

            // View All button for withdrawals
            const viewAllBtn = document.querySelector('.card-actions .btn-secondary');
            if (viewAllBtn && viewAllBtn.textContent.includes('View All')) {
                viewAllBtn.addEventListener('click', function() {
                    showAllWithdrawalsModal();
                });
            }

            // Filter functionality
            const filterSelects = document.querySelectorAll('.filter-select');
            filterSelects.forEach(select => {
                select.addEventListener('change', function() {
                    applyFilters();
                });
            });

            // Search functionality
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    applyFilters();
                });
            }

            // Real-time updates every 30 seconds
            setInterval(() => {
                fetchBitcoinData();
                fetchStarknetData();
                updateTransactionStatuses();
                updateSystemResources();

                // Generate random notifications occasionally
                if (Math.random() < 0.3) { // 30% chance every 30 seconds
                    generateRandomNotifications();
                }
            }, 30000);

            // Apply saved settings
            applySettings();

            // Global error handler
            window.addEventListener('error', function(e) {
                console.error('Global error:', e.error);
                addNotification('Application Error', 'An unexpected error occurred', 'error');
            });

            window.addEventListener('unhandledrejection', function(e) {
                console.error('Unhandled promise rejection:', e.reason);
                addNotification('Application Error', 'An unexpected error occurred', 'error');
            });

            // Add some initial notifications
            setTimeout(() => {
                addNotification('Welcome', 'Dashboard loaded successfully', 'success');
                addNotification('System Status', 'All systems operational', 'info');
            }, 1000);
        });

        // User profile data - load from localStorage or use defaults
        let userData = JSON.parse(localStorage.getItem('userData')) || {
            name: "User Name",
            avatar: null,
            email: "",
            role: "user"
        };

        // User settings - load from localStorage or use defaults
        let userSettings = JSON.parse(localStorage.getItem('userSettings')) || {
            theme: 'dark',
            autoRefresh: true,
            refreshInterval: 30,
            notifications: {
                enabled: true,
                sound: false,
                types: {
                    deposits: true,
                    withdrawals: true,
                    system: true,
                    operators: true
                }
            },
            display: {
                showCharts: false,
                compactView: false,
                animations: true
            }
        };

        // Update user profile in sidebar
        function updateUserProfile() {
            document.getElementById('userName').textContent = userData.name;
            document.getElementById('userRole').textContent = userData.role ? userData.role.charAt(0).toUpperCase() + userData.role.slice(1) : 'Registered User';

            const avatarElement = document.getElementById('userAvatar');
            const avatarInitials = document.getElementById('avatarInitials');

            if (userData.avatar) {
                avatarElement.innerHTML = `<img src="${userData.avatar}" alt="${userData.name}">`;
            } else {
                const names = userData.name.split(' ');
                let initials = names[0].charAt(0);
                if (names.length > 1) {
                    initials += names[names.length - 1].charAt(0);
                }
                avatarInitials.textContent = initials;
            }

            // Show role-based content
            showRoleBasedContent();
        }

        // Show role-based content
        function showRoleBasedContent() {
            const role = userData.role || 'user';
            const contentDiv = document.getElementById('roleBasedContent');

            if (role === 'operator') {
                contentDiv.innerHTML = `
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Operator Controls</h2>
                        </div>
                        <div class="alert alert-info">
                            <div class="alert-icon">
                                <i class="fas fa-info-circle"></i>
                            </div>
                            <div class="alert-content">
                                <div class="alert-title">Operator Access Granted</div>
                                <div class="alert-description">You have access to operator-specific features and controls.</div>
                            </div>
                        </div>
                        <div class="progress-container">
                            <div class="progress-header">
                                <div class="progress-label">Node Performance</div>
                                <div class="progress-value">95%</div>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="background: var(--secondary); width: 95%;"></div>
                            </div>
                        </div>
                        <button class="btn btn-secondary" style="margin-top: 15px;">
                            <i class="fas fa-cogs"></i>
                            Manage Nodes
                        </button>
                    </div>
                `;
            } else if (role === 'admin') {
                contentDiv.innerHTML = `
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Administrator Panel</h2>
                        </div>
                        <div class="alert alert-warning">
                            <div class="alert-icon">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="alert-content">
                                <div class="alert-title">Admin Privileges Active</div>
                                <div class="alert-description">You have full administrative access to the system.</div>
                            </div>
                        </div>
                        <div class="filter-bar">
                            <button class="btn btn-sm">
                                <i class="fas fa-users"></i>
                                Manage Users
                            </button>
                            <button class="btn btn-sm btn-secondary">
                                <i class="fas fa-shield-alt"></i>
                                Security Settings
                            </button>
                            <button class="btn btn-sm btn-secondary">
                                <i class="fas fa-chart-bar"></i>
                                System Analytics
                            </button>
                        </div>
                    </div>
                `;
            } else {
                contentDiv.innerHTML = ''; // No special content for regular users
            }
        }

        // Fetch Bitcoin network data
        async function fetchBitcoinData() {
            const bitcoinCard = document.querySelector('.stat-card:nth-child(1)');
            const bitcoinValueElement = bitcoinCard?.querySelector('.stat-value');
            const changeElement = bitcoinCard?.querySelector('.stat-change');

            // Show loading state
            if (bitcoinValueElement) {
                bitcoinValueElement.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
            }

            try {
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 10000); // 10 second timeout

                const response = await fetch('https://blockchain.info/q/getblockcount', {
                    signal: controller.signal
                });
                clearTimeout(timeoutId);

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const blockHeight = await response.text();
                const height = parseInt(blockHeight);

                if (isNaN(height)) {
                    throw new Error('Invalid block height received');
                }

                // Update Bitcoin height
                if (bitcoinValueElement) {
                    bitcoinValueElement.textContent = height.toLocaleString();
                }

                // Update change indicator with simulated change
                if (changeElement) {
                    const change = Math.floor(Math.random() * 200) + 50;
                    changeElement.innerHTML = `<i class="fas fa-arrow-up"></i> +${change} blocks`;
                    changeElement.className = 'stat-change positive';
                }

                // Remove any existing error messages
                const existingError = bitcoinCard?.querySelector('.error-message');
                if (existingError) {
                    existingError.remove();
                }

            } catch (error) {
                console.error('Error fetching Bitcoin data:', error);

                // Show error state
                if (bitcoinValueElement) {
                    bitcoinValueElement.innerHTML = '<i class="fas fa-exclamation-triangle"></i>';
                }

                if (changeElement) {
                    changeElement.innerHTML = '<i class="fas fa-exclamation-circle"></i> Error';
                    changeElement.className = 'stat-change negative';
                }

                // Show error message
                if (bitcoinCard && !bitcoinCard.querySelector('.error-message')) {
                    const errorDiv = document.createElement('div');
                    errorDiv.className = 'error-message';
                    errorDiv.innerHTML = `
                        <i class="fas fa-exclamation-triangle"></i>
                        <span>Failed to fetch Bitcoin data</span>
                        <button class="retry-button" onclick="fetchBitcoinData()">Retry</button>
                    `;
                    bitcoinCard.appendChild(errorDiv);
                }

                // Send error notification
                if (userSettings.notifications.enabled && userSettings.notifications.types.system) {
                    addNotification('Data Fetch Error', 'Failed to fetch Bitcoin network data', 'error');
                }
            }
        }

        // Fetch Starknet data (simulated since public APIs may be limited)
        async function fetchStarknetData() {
            try {
                // Simulate Starknet data - in real implementation, use Starknet APIs
                const starknetHeight = Math.floor(Math.random() * 100) + 788400;

                const starknetHeightElement = document.querySelector('.stat-card:nth-child(2) .stat-value');
                if (starknetHeightElement) {
                    starknetHeightElement.textContent = starknetHeight.toLocaleString();
                }

                // Update SPV proofs count
                const proofsElement = document.querySelector('.stat-card:nth-child(3) .stat-value');
                if (proofsElement) {
                    const currentProofs = parseInt(proofsElement.textContent.replace(/,/g, ''));
                    const newProofs = currentProofs + Math.floor(Math.random() * 10);
                    proofsElement.textContent = newProofs.toLocaleString();
                }
            } catch (error) {
                console.error('Error fetching Starknet data:', error);
            }
        }

        // Fetch system data
        function fetchSystemData() {
            // Update operator count
            const operatorElement = document.querySelector('.stat-card:nth-child(4) .stat-value');
            if (operatorElement) {
                const online = Math.floor(Math.random() * 3) + 4;
                const total = 7;
                operatorElement.textContent = `${online}/${total}`;
            }

            // Update progress bars
            updateProgressBars();
        }

        // Update progress bars with dynamic values
        function updateProgressBars() {
            // Bitcoin sync
            const bitcoinProgress = document.querySelector('.progress-bitcoin');
            if (bitcoinProgress) {
                bitcoinProgress.style.width = '100%';
                document.querySelector('.progress-value').textContent = '100%';
            }

            // Proof construction
            const proofProgress = document.querySelector('.progress-proof');
            if (proofProgress) {
                const proofValue = Math.floor(Math.random() * 30) + 50;
                proofProgress.style.width = proofValue + '%';
                const proofValueElement = document.querySelectorAll('.progress-value')[1];
                if (proofValueElement) {
                    proofValueElement.textContent = proofValue + '%';
                }
            }

            // Starknet submission
            const starknetProgress = document.querySelector('.progress-starknet');
            if (starknetProgress) {
                const starknetValue = Math.floor(Math.random() * 40) + 30;
                starknetProgress.style.width = starknetValue + '%';
                const starknetValueElement = document.querySelectorAll('.progress-value')[2];
                if (starknetValueElement) {
                    starknetValueElement.textContent = starknetValue + '%';
                }
            }
        }

        // Fetch transaction data
        function fetchTransactionData() {
            // Simulate fetching new transaction data
            updateDepositTable();
            updateWithdrawalTable();
        }

        // Update deposit table with dynamic data
        function updateDepositTable() {
            const tbody = document.querySelector('.table tbody');
            if (!tbody) return;

            // Simulate new deposits
            const deposits = [
                { id: 'DEP-' + (7832 + Math.floor(Math.random() * 10)), amount: (Math.random() * 2).toFixed(2), status: 'completed', time: '2 hours ago' },
                { id: 'DEP-' + (7831 + Math.floor(Math.random() * 10)), amount: (Math.random() * 2).toFixed(2), status: 'processing', time: '3 hours ago' },
                { id: 'DEP-' + (7830 + Math.floor(Math.random() * 10)), amount: (Math.random() * 2).toFixed(2), status: 'pending', time: '5 hours ago' },
                { id: 'DEP-' + (7829 + Math.floor(Math.random() * 10)), amount: (Math.random() * 2).toFixed(2), status: 'failed', time: '8 hours ago' }
            ];

            tbody.innerHTML = deposits.map(deposit => `
                <tr>
                    <td>${deposit.id}</td>
                    <td>${deposit.amount} BTC</td>
                    <td>
                        <span class="status-badge status-${deposit.status}">
                            <i class="fas fa-${deposit.status === 'completed' ? 'check-circle' : deposit.status === 'processing' ? 'spinner fa-spin' : deposit.status === 'pending' ? 'clock' : 'exclamation-circle'}"></i>
                            ${deposit.status === 'processing' ? 'Building Proof' : deposit.status === 'pending' ? 'Waiting for Confirmations' : deposit.status === 'failed' ? 'Invalid Tx' : 'Completed'}
                        </span>
                    </td>
                    <td>${deposit.time}</td>
                </tr>
            `).join('');
        }

        // Update withdrawal table
        function updateWithdrawalTable() {
            const withdrawalTbody = document.querySelectorAll('.table tbody')[1];
            if (!withdrawalTbody) return;

            const withdrawals = [
                { id: 'WD-' + (4521 + Math.floor(Math.random() * 10)), amount: (Math.random() * 2).toFixed(2), status: 'processing' },
                { id: 'WD-' + (4520 + Math.floor(Math.random() * 10)), amount: (Math.random() * 2).toFixed(2), status: 'pending' },
                { id: 'WD-' + (4519 + Math.floor(Math.random() * 10)), amount: (Math.random() * 2).toFixed(2), status: 'completed' }
            ];

            withdrawalTbody.innerHTML = withdrawals.map(withdrawal => `
                <tr>
                    <td>${withdrawal.id}</td>
                    <td>${withdrawal.amount} BTC</td>
                    <td>
                        <span class="status-badge status-${withdrawal.status}">
                            <i class="fas fa-${withdrawal.status === 'completed' ? 'check-circle' : withdrawal.status === 'processing' ? 'spinner fa-spin' : 'clock'}"></i>
                            ${withdrawal.status === 'processing' ? 'Signing' : withdrawal.status === 'pending' ? 'Awaiting Signatures' : 'Completed'}
                        </span>
                    </td>
                </tr>
            `).join('');
        }

        // Update transaction statuses in real-time
        function updateTransactionStatuses() {
            const statusBadges = document.querySelectorAll('.status-badge');
            statusBadges.forEach(badge => {
                if (badge.classList.contains('status-pending')) {
                    if (Math.random() > 0.7) {
                        badge.classList.remove('status-pending');
                        badge.classList.add('status-processing');
                        badge.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Building Proof';
                    }
                } else if (badge.classList.contains('status-processing')) {
                    if (Math.random() > 0.8) {
                        badge.classList.remove('status-processing');
                        badge.classList.add('status-completed');
                        badge.innerHTML = '<i class="fas fa-check-circle"></i> Completed';
                    }
                }
            });
        }

        // Chart variables
        let systemChart, transactionChart, networkChart;
        let chartData = {
            cpu: [],
            memory: [],
            disk: [],
            timestamps: [],
            transactions: [],
            network: []
        };

        // Initialize charts
        function initializeCharts() {
            const systemCtx = document.getElementById('systemChart');
            const transactionCtx = document.getElementById('transactionChart');
            const networkCtx = document.getElementById('networkChart');

            if (systemCtx) {
                systemChart = new Chart(systemCtx, {
                    type: 'line',
                    data: {
                        labels: [],
                        datasets: [{
                            label: 'CPU %',
                            data: [],
                            borderColor: 'var(--info)',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            tension: 0.4,
                            fill: true
                        }, {
                            label: 'Memory %',
                            data: [],
                            borderColor: 'var(--warning)',
                            backgroundColor: 'rgba(245, 158, 11, 0.1)',
                            tension: 0.4,
                            fill: true
                        }, {
                            label: 'Disk %',
                            data: [],
                            borderColor: 'var(--danger)',
                            backgroundColor: 'rgba(239, 68, 68, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                labels: {
                                    color: 'var(--light)',
                                    font: { size: 10 }
                                }
                            }
                        },
                        scales: {
                            x: {
                                ticks: { color: 'var(--gray)' },
                                grid: { color: 'rgba(255,255,255,0.1)' }
                            },
                            y: {
                                ticks: { color: 'var(--gray)' },
                                grid: { color: 'rgba(255,255,255,0.1)' }
                            }
                        }
                    }
                });
            }

            if (transactionCtx) {
                transactionChart = new Chart(transactionCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Deposits', 'Withdrawals', 'Pending', 'Completed'],
                        datasets: [{
                            label: 'Count',
                            data: [],
                            backgroundColor: [
                                'rgba(124, 58, 237, 0.6)',
                                'rgba(16, 185, 129, 0.6)',
                                'rgba(245, 158, 11, 0.6)',
                                'rgba(59, 130, 246, 0.6)'
                            ],
                            borderColor: [
                                'var(--primary)',
                                'var(--secondary)',
                                'var(--warning)',
                                'var(--info)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: { color: 'var(--gray)' },
                                grid: { color: 'rgba(255,255,255,0.1)' }
                            },
                            x: {
                                ticks: { color: 'var(--gray)' },
                                grid: { color: 'rgba(255,255,255,0.1)' }
                            }
                        }
                    }
                });
            }

            if (networkCtx) {
                networkChart = new Chart(networkCtx, {
                    type: 'line',
                    data: {
                        labels: [],
                        datasets: [{
                            label: 'Bitcoin Blocks',
                            data: [],
                            borderColor: '#f7931a',
                            backgroundColor: 'rgba(247, 147, 26, 0.1)',
                            tension: 0.4,
                            fill: true
                        }, {
                            label: 'Starknet Headers',
                            data: [],
                            borderColor: 'var(--primary)',
                            backgroundColor: 'rgba(124, 58, 237, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                labels: {
                                    color: 'var(--light)',
                                    font: { size: 10 }
                                }
                            }
                        },
                        scales: {
                            x: {
                                ticks: { color: 'var(--gray)' },
                                grid: { color: 'rgba(255,255,255,0.1)' }
                            },
                            y: {
                                ticks: { color: 'var(--gray)' },
                                grid: { color: 'rgba(255,255,255,0.1)' }
                            }
                        }
                    }
                });
            }
        }

        // Toggle charts visibility
        function toggleCharts() {
            const chartsSection = document.getElementById('chartsSection');
            const toggleText = document.getElementById('chartToggleText');
            const toggleBtn = document.querySelector('[onclick="toggleCharts()"]');

            if (chartsSection.style.display === 'none') {
                // Show charts
                chartsSection.style.display = 'block';
                toggleText.textContent = 'Hide Charts';

                // Initialize charts if not already done
                if (!systemChart) {
                    toggleBtn.disabled = true;
                    toggleBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Loading Charts...';

                    try {
                        initializeCharts();
                        updateCharts();
                        toggleBtn.disabled = false;
                        toggleBtn.innerHTML = '<i class="fas fa-chart-line"></i> <span id="chartToggleText">Hide Charts</span>';
                    } catch (error) {
                        console.error('Error initializing charts:', error);
                        chartsSection.style.display = 'none';
                        toggleText.textContent = 'Show Charts';
                        toggleBtn.disabled = false;
                        toggleBtn.innerHTML = '<i class="fas fa-exclamation-triangle"></i> <span id="chartToggleText">Show Charts</span>';

                        addNotification('Chart Error', 'Failed to load charts', 'error');
                    }
                }
            } else {
                // Hide charts
                chartsSection.style.display = 'none';
                toggleText.textContent = 'Show Charts';
            }
        }

        // Update charts with new data
        function updateCharts() {
            if (!systemChart || !transactionChart || !networkChart) return;

            const now = new Date();
            const timeString = now.getHours() + ':' + now.getMinutes().toString().padStart(2, '0');

            // Update system chart
            if (chartData.timestamps.length >= 24) {
                chartData.timestamps.shift();
                chartData.cpu.shift();
                chartData.memory.shift();
                chartData.disk.shift();
            }

            chartData.timestamps.push(timeString);
            chartData.cpu.push(Math.floor(Math.random() * 30) + 30);
            chartData.memory.push(Math.floor(Math.random() * 20) + 50);
            chartData.disk.push(Math.floor(Math.random() * 10) + 70);

            systemChart.data.labels = chartData.timestamps;
            systemChart.data.datasets[0].data = chartData.cpu;
            systemChart.data.datasets[1].data = chartData.memory;
            systemChart.data.datasets[2].data = chartData.disk;
            systemChart.update();

            // Update transaction chart
            const deposits = Math.floor(Math.random() * 50) + 20;
            const withdrawals = Math.floor(Math.random() * 30) + 10;
            const pending = Math.floor(Math.random() * 20) + 5;
            const completed = deposits + withdrawals - pending;

            transactionChart.data.datasets[0].data = [deposits, withdrawals, pending, completed];
            transactionChart.update();

            // Update network chart
            if (chartData.network.length >= 24) {
                chartData.network.shift();
            }
            chartData.network.push(Math.floor(Math.random() * 100) + 788400);

            networkChart.data.labels = chartData.timestamps;
            networkChart.data.datasets[0].data = chartData.network;
            networkChart.data.datasets[1].data = chartData.network.map(h => h - Math.floor(Math.random() * 100));
            networkChart.update();
        }

        // Update system resources
        function updateSystemResources() {
            // CPU usage
            const cpuValue = Math.floor(Math.random() * 30) + 30;
            const cpuBar = document.getElementById('cpuBar');
            const cpuValueElement = document.getElementById('cpuValue');
            if (cpuBar && cpuValueElement) {
                cpuBar.style.width = cpuValue + '%';
                cpuValueElement.textContent = cpuValue + '%';
            }

            // Memory usage
            const memValue = Math.floor(Math.random() * 20) + 50;
            const memBar = document.getElementById('memBar');
            const memValueElement = document.getElementById('memValue');
            if (memBar && memValueElement) {
                memBar.style.width = memValue + '%';
                memValueElement.textContent = memValue + '%';
            }

            // Disk usage
            const diskValue = Math.floor(Math.random() * 10) + 70;
            const diskBar = document.getElementById('diskBar');
            const diskValueElement = document.getElementById('diskValue');
            if (diskBar && diskValueElement) {
                diskBar.style.width = diskValue + '%';
                diskValueElement.textContent = diskValue + '%';
            }

            // Update charts if visible
            if (document.getElementById('chartsSection').style.display !== 'none') {
                updateCharts();
            }
        }

        // Apply filters to tables
        function applyFilters() {
            const searchTerm = document.getElementById('searchInput')?.value.toLowerCase() || '';
            const statusFilter = document.getElementById('statusFilter')?.value || 'all';
            const timeFilter = document.getElementById('timeFilter')?.value || 'all';
            const amountFilter = document.getElementById('amountFilter')?.value || 'all';

            const rows = document.querySelectorAll('.table tbody tr');
            rows.forEach(row => {
                let show = true;

                // Search filter
                if (searchTerm) {
                    const cells = row.querySelectorAll('td');
                    const rowText = Array.from(cells).map(cell => cell.textContent.toLowerCase()).join(' ');
                    if (!rowText.includes(searchTerm)) {
                        show = false;
                    }
                }

                // Status filter
                if (statusFilter !== 'all' && show) {
                    const statusBadge = row.querySelector('.status-badge');
                    if (statusBadge) {
                        const status = statusBadge.classList.contains('status-completed') ? 'completed' :
                                      statusBadge.classList.contains('status-processing') ? 'processing' :
                                      statusBadge.classList.contains('status-pending') ? 'pending' : 'failed';
                        if (status !== statusFilter) {
                            show = false;
                        }
                    }
                }

                // Amount filter
                if (amountFilter !== 'all' && show) {
                    const amountCell = row.querySelectorAll('td')[1]; // Amount is in second column
                    if (amountCell) {
                        const amountText = amountCell.textContent;
                        const amount = parseFloat(amountText.replace(' BTC', ''));
                        let amountMatch = false;

                        switch (amountFilter) {
                            case 'small':
                                amountMatch = amount >= 0 && amount < 1;
                                break;
                            case 'medium':
                                amountMatch = amount >= 1 && amount < 10;
                                break;
                            case 'large':
                                amountMatch = amount >= 10;
                                break;
                        }

                        if (!amountMatch) {
                            show = false;
                        }
                    }
                }

                // Time filter (simplified - in real app would check actual timestamps)
                if (timeFilter !== 'all' && show) {
                    const timeCell = row.querySelectorAll('td')[3]; // Time is in fourth column
                    if (timeCell) {
                        const timeText = timeCell.textContent.toLowerCase();
                        let timeMatch = false;

                        switch (timeFilter) {
                            case '24h':
                                timeMatch = timeText.includes('hour') || timeText.includes('minute');
                                break;
                            case '7d':
                                timeMatch = timeText.includes('hour') || timeText.includes('minute') || timeText.includes('day');
                                break;
                            case '30d':
                                timeMatch = true; // Show all for 30 days
                                break;
                        }

                        if (!timeMatch) {
                            show = false;
                        }
                    }
                }

                row.style.display = show ? '' : 'none';
            });

            // Update result count
            updateResultCount();
        }

        // Update result count
        function updateResultCount() {
            const visibleRows = document.querySelectorAll('.table tbody tr:not([style*="display: none"])');
            const totalRows = document.querySelectorAll('.table tbody tr');
            const resultText = `${visibleRows.length} of ${totalRows.length} transactions`;

            // Add result count display if it doesn't exist
            let resultCount = document.getElementById('resultCount');
            if (!resultCount) {
                const filterBar = document.querySelector('.filter-bar');
                if (filterBar) {
                    resultCount = document.createElement('div');
                    resultCount.id = 'resultCount';
                    resultCount.style.cssText = 'color: var(--gray); font-size: 0.8rem; margin-top: 10px;';
                    filterBar.appendChild(resultCount);
                }
            }

            if (resultCount) {
                resultCount.textContent = resultText;
            }
        }

        // Show new transaction modal
        function showNewTransactionModal() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.8); display: flex; align-items: center;
                justify-content: center; z-index: 1000;
            `;
            modal.innerHTML = `
                <div style="background: var(--darker); padding: 30px; border-radius: 16px; max-width: 500px; width: 90%;">
                    <h3 style="color: var(--primary); margin-bottom: 20px;">New Transaction</h3>
                    <form id="newTxForm">
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; color: var(--light);">Transaction Type</label>
                            <select id="txType" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: white;">
                                <option value="deposit">Deposit (BTC  sBTC)</option>
                                <option value="withdrawal">Withdrawal (sBTC  BTC)</option>
                            </select>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; color: var(--light);">Amount (BTC)</label>
                            <input type="number" id="txAmount" step="0.00000001" min="0.00000001" placeholder="0.00000000" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: white;">
                            <small id="amountError" style="color: var(--danger); display: none;">Please enter a valid amount</small>
                        </div>
                        <div style="margin-bottom: 15px;" id="recipientField">
                            <label style="display: block; margin-bottom: 5px; color: var(--light);">Recipient Address</label>
                            <input type="text" id="recipientAddress" placeholder="Bitcoin address or Starknet address" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: white;">
                            <small id="addressError" style="color: var(--danger); display: none;">Please enter a valid address</small>
                        </div>
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 5px; color: var(--light);">
                                <input type="checkbox" id="confirmTx" style="margin-right: 8px;"> I confirm this transaction
                            </label>
                            <small id="confirmError" style="color: var(--danger); display: none;">Please confirm the transaction</small>
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <button type="submit" id="submitTxBtn" style="flex: 1; background: var(--primary); color: white; border: none; padding: 12px; border-radius: 8px; cursor: pointer;">Create Transaction</button>
                            <button type="button" onclick="this.parentElement.parentElement.parentElement.remove()" style="background: rgba(255,255,255,0.1); color: white; border: none; padding: 12px; border-radius: 8px; cursor: pointer;">Cancel</button>
                        </div>
                    </form>
                </div>
            `;
            document.body.appendChild(modal);

            // Dynamic form updates
            const txTypeSelect = document.getElementById('txType');
            const recipientField = document.getElementById('recipientField');
            const recipientInput = document.getElementById('recipientAddress');

            txTypeSelect.addEventListener('change', function() {
                if (this.value === 'deposit') {
                    recipientField.querySelector('label').textContent = 'Bitcoin Deposit Address';
                    recipientInput.placeholder = 'Your Bitcoin address for deposit';
                } else {
                    recipientField.querySelector('label').textContent = 'Bitcoin Withdrawal Address';
                    recipientInput.placeholder = 'Bitcoin address to receive withdrawal';
                }
            });

            // Handle form submission
            document.getElementById('newTxForm').addEventListener('submit', function(e) {
                e.preventDefault();

                // Clear previous errors
                document.querySelectorAll('.error').forEach(el => el.style.display = 'none');
                document.getElementById('amountError').style.display = 'none';
                document.getElementById('addressError').style.display = 'none';
                document.getElementById('confirmError').style.display = 'none';

                // Get form values
                const txType = document.getElementById('txType').value;
                const amount = parseFloat(document.getElementById('txAmount').value);
                const address = document.getElementById('recipientAddress').value.trim();
                const confirmed = document.getElementById('confirmTx').checked;

                let isValid = true;

                // Validate amount
                if (!amount || amount <= 0 || amount > 100) {
                    document.getElementById('amountError').textContent = 'Amount must be between 0.00000001 and 100 BTC';
                    document.getElementById('amountError').style.display = 'block';
                    isValid = false;
                }

                // Validate address
                if (!address) {
                    document.getElementById('addressError').textContent = 'Please enter a recipient address';
                    document.getElementById('addressError').style.display = 'block';
                    isValid = false;
                } else if (txType === 'deposit' && !address.match(/^[13][a-km-zA-HJ-NP-Z1-9]{25,34}$/)) {
                    document.getElementById('addressError').textContent = 'Please enter a valid Bitcoin address';
                    document.getElementById('addressError').style.display = 'block';
                    isValid = false;
                }

                // Validate confirmation
                if (!confirmed) {
                    document.getElementById('confirmError').style.display = 'block';
                    isValid = false;
                }

                if (!isValid) return;

                // Process transaction
                const submitBtn = document.getElementById('submitTxBtn');
                const originalText = submitBtn.textContent;
                submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
                submitBtn.disabled = true;

                // Simulate processing
                setTimeout(() => {
                    const txId = txType === 'deposit' ? 'DEP-' + Math.floor(Math.random() * 10000) : 'WD-' + Math.floor(Math.random() * 10000);

                    // Show success modal
                    showTransactionSuccessModal(txId, txType, amount, address);
                    modal.remove();

                    // Refresh data
                    fetchTransactionData();
                }, 2000);
            });
        }

        // Show transaction success modal
        function showTransactionSuccessModal(txId, txType, amount, address) {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.8); display: flex; align-items: center;
                justify-content: center; z-index: 1000;
            `;
            modal.innerHTML = `
                <div style="background: var(--darker); padding: 30px; border-radius: 16px; max-width: 400px; width: 90%; text-align: center;">
                    <div style="color: var(--secondary); font-size: 3rem; margin-bottom: 20px;">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h3 style="color: var(--primary); margin-bottom: 15px;">Transaction Created!</h3>
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                        <div style="margin-bottom: 10px;"><strong>Transaction ID:</strong> ${txId}</div>
                        <div style="margin-bottom: 10px;"><strong>Type:</strong> ${txType.charAt(0).toUpperCase() + txType.slice(1)}</div>
                        <div style="margin-bottom: 10px;"><strong>Amount:</strong> ${amount} BTC</div>
                        <div><strong>Address:</strong> ${address.substring(0, 20)}...</div>
                    </div>
                    <button onclick="this.parentElement.parentElement.remove()" style="background: var(--primary); color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer;">Close</button>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // Show operator details modal
        function showOperatorDetails(operatorId) {
            const operators = {
                1: {
                    name: 'Operator 01',
                    location: 'Munich, Germany',
                    bond: '2.5 BTC',
                    status: 'online',
                    uptime: '99.9%',
                    version: 'v2.1.4',
                    publicKey: '0x047c3a8e2f8b9c1d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1',
                    lastSeen: '2 minutes ago',
                    blocksProcessed: '1,247',
                    transactionsSigned: '892'
                },
                2: {
                    name: 'Operator 02',
                    location: 'Tokyo, Japan',
                    bond: '2.0 BTC',
                    status: 'online',
                    uptime: '99.7%',
                    version: 'v2.1.4',
                    publicKey: '0x058d4b9e3f7c2a8d1e6f5b9c0d3e2f1a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1',
                    lastSeen: '1 minute ago',
                    blocksProcessed: '1,189',
                    transactionsSigned: '756'
                },
                3: {
                    name: 'Operator 03',
                    location: 'Virginia, USA',
                    bond: '1.8 BTC',
                    status: 'offline',
                    uptime: '95.2%',
                    version: 'v2.1.3',
                    publicKey: '0x069e5c4f8a3b7d2e9f6c1a5b8d0e4f3c6b7a8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2',
                    lastSeen: '45 minutes ago',
                    blocksProcessed: '987',
                    transactionsSigned: '623'
                },
                4: {
                    name: 'Operator 04',
                    location: 'Singapore',
                    bond: '2.2 BTC',
                    status: 'syncing',
                    uptime: '98.5%',
                    version: 'v2.1.4',
                    publicKey: '0x071f6d5g9b4c8e3f0a7d2b6c9e1f4a5b8c0d3e6f7a9b1c4d5e8f9a2b3c6d7e0f1a4b5c8d9e2f3a6b7c0d1e4f5a8b9c2d3e6f7a0b1',
                    lastSeen: '5 minutes ago',
                    blocksProcessed: '1,056',
                    transactionsSigned: '689'
                }
            };

            const operator = operators[operatorId];
            if (!operator) return;

            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.8); display: flex; align-items: center;
                justify-content: center; z-index: 1000;
            `;

            const statusColor = operator.status === 'online' ? 'var(--secondary)' :
                               operator.status === 'offline' ? 'var(--danger)' : 'var(--warning)';
            const statusIcon = operator.status === 'online' ? 'fa-check-circle' :
                              operator.status === 'offline' ? 'fa-times-circle' : 'fa-sync fa-spin';

            modal.innerHTML = `
                <div style="background: var(--darker); padding: 30px; border-radius: 16px; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto;">
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 25px;">
                        <div style="width: 60px; height: 60px; border-radius: 50%; background: var(--gradient); display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5rem; font-weight: 600;">
                            ${operator.name.split(' ')[1]}
                        </div>
                        <div>
                            <h2 style="color: var(--primary); margin: 0; font-size: 1.5rem;">${operator.name}</h2>
                            <div style="color: var(--gray); margin-top: 5px;">${operator.location}</div>
                        </div>
                        <div style="margin-left: auto; text-align: center;">
                            <div style="color: ${statusColor}; font-size: 1.5rem;"><i class="fas ${statusIcon}"></i></div>
                            <div style="color: var(--gray); font-size: 0.8rem; text-transform: capitalize;">${operator.status}</div>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 25px;">
                        <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px;">
                            <div style="color: var(--gray); font-size: 0.9rem;">Bond Amount</div>
                            <div style="color: var(--light); font-size: 1.2rem; font-weight: 600;">${operator.bond}</div>
                        </div>
                        <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px;">
                            <div style="color: var(--gray); font-size: 0.9rem;">Uptime</div>
                            <div style="color: var(--light); font-size: 1.2rem; font-weight: 600;">${operator.uptime}</div>
                        </div>
                        <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px;">
                            <div style="color: var(--gray); font-size: 0.9rem;">Version</div>
                            <div style="color: var(--light); font-size: 1.2rem; font-weight: 600;">${operator.version}</div>
                        </div>
                        <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px;">
                            <div style="color: var(--gray); font-size: 0.9rem;">Last Seen</div>
                            <div style="color: var(--light); font-size: 1.2rem; font-weight: 600;">${operator.lastSeen}</div>
                        </div>
                    </div>

                    <div style="margin-bottom: 25px;">
                        <h3 style="color: var(--light); margin-bottom: 15px;">Performance Metrics</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                            <div style="background: rgba(255,255,255,0.05); padding: 12px; border-radius: 8px; text-align: center;">
                                <div style="color: var(--gray); font-size: 0.8rem;">Blocks Processed</div>
                                <div style="color: var(--light); font-size: 1.1rem; font-weight: 600;">${operator.blocksProcessed}</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.05); padding: 12px; border-radius: 8px; text-align: center;">
                                <div style="color: var(--gray); font-size: 0.8rem;">Transactions Signed</div>
                                <div style="color: var(--light); font-size: 1.1rem; font-weight: 600;">${operator.transactionsSigned}</div>
                            </div>
                        </div>
                    </div>

                    <div style="margin-bottom: 25px;">
                        <h3 style="color: var(--light); margin-bottom: 15px;">Public Key</h3>
                        <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; font-family: monospace; font-size: 0.9rem; word-break: break-all; color: var(--light);">
                            ${operator.publicKey}
                        </div>
                    </div>

                    <div style="display: flex; gap: 10px; justify-content: flex-end;">
                        ${operator.status === 'offline' ?
                            '<button onclick="restartOperator(' + operatorId + ')" style="background: var(--warning); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;"><i class="fas fa-play"></i> Restart Node</button>' :
                            '<button onclick="pingOperator(' + operatorId + ')" style="background: var(--info); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;"><i class="fas fa-signal"></i> Ping Node</button>'
                        }
                        <button onclick="this.parentElement.parentElement.parentElement.remove()" style="background: rgba(255,255,255,0.1); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;">Close</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // Restart operator node
        function restartOperator(operatorId) {
            alert(`Restarting Operator ${operatorId}... (This would trigger a restart in a real system)`);
        }

        // Ping operator node
        function pingOperator(operatorId) {
            alert(`Pinging Operator ${operatorId}... Response time: ${Math.floor(Math.random() * 100) + 10}ms`);
        }

        // Notification system
        let notifications = [];
        let unreadCount = 0;

        // Toggle notification panel
        function toggleNotifications() {
            const panel = document.getElementById('notificationPanel');
            const isVisible = panel.style.display === 'block';

            // Hide panel if clicking outside
            document.addEventListener('click', function hidePanel(e) {
                if (!e.target.closest('.notification-bell') && !e.target.closest('.notification-panel')) {
                    panel.style.display = 'none';
                    document.removeEventListener('click', hidePanel);
                }
            });

            panel.style.display = isVisible ? 'none' : 'block';
        }

        // Add notification
        function addNotification(title, message, type = 'info') {
            const notification = {
                id: Date.now(),
                title,
                message,
                type,
                timestamp: new Date(),
                read: false
            };

            notifications.unshift(notification);
            if (notifications.length > 50) {
                notifications = notifications.slice(0, 50); // Keep only last 50
            }

            unreadCount++;
            updateNotificationBadge();
            renderNotifications();

            // Auto-hide after 5 seconds for info notifications
            if (type === 'info') {
                setTimeout(() => {
                    markAsRead(notification.id);
                }, 5000);
            }
        }

        // Mark notification as read
        function markAsRead(notificationId) {
            const notification = notifications.find(n => n.id === notificationId);
            if (notification && !notification.read) {
                notification.read = true;
                unreadCount--;
                updateNotificationBadge();
                renderNotifications();
            }
        }

        // Clear all notifications
        function clearAllNotifications() {
            notifications = [];
            unreadCount = 0;
            updateNotificationBadge();
            renderNotifications();
        }

        // Update notification badge
        function updateNotificationBadge() {
            const badge = document.getElementById('notificationBadge');
            if (unreadCount > 0) {
                badge.textContent = unreadCount > 99 ? '99+' : unreadCount;
                badge.style.display = 'flex';
            } else {
                badge.style.display = 'none';
            }
        }

        // Render notifications
        function renderNotifications() {
            const list = document.getElementById('notificationList');

            if (notifications.length === 0) {
                list.innerHTML = '<div style="padding: 20px; text-align: center; color: var(--gray);">No notifications</div>';
                return;
            }

            list.innerHTML = notifications.map(notification => {
                const timeAgo = getTimeAgo(notification.timestamp);
                const unreadClass = notification.read ? '' : 'unread';
                const iconClass = getNotificationIcon(notification.type);

                return `
                    <div class="notification-item ${unreadClass}" onclick="markAsRead(${notification.id})">
                        <div class="notification-title">
                            <i class="${iconClass}" style="margin-right: 8px;"></i>
                            ${notification.title}
                        </div>
                        <div class="notification-message">${notification.message}</div>
                        <div class="notification-time">${timeAgo}</div>
                    </div>
                `;
            }).join('');
        }

        // Get notification icon based on type
        function getNotificationIcon(type) {
            switch (type) {
                case 'success': return 'fas fa-check-circle';
                case 'warning': return 'fas fa-exclamation-triangle';
                case 'error': return 'fas fa-exclamation-circle';
                case 'info':
                default: return 'fas fa-info-circle';
            }
        }

        // Get time ago string
        function getTimeAgo(timestamp) {
            const now = new Date();
            const diff = now - timestamp;
            const minutes = Math.floor(diff / 60000);
            const hours = Math.floor(diff / 3600000);
            const days = Math.floor(diff / 86400000);

            if (minutes < 1) return 'Just now';
            if (minutes < 60) return `${minutes}m ago`;
            if (hours < 24) return `${hours}h ago`;
            return `${days}d ago`;
        }

        // Generate random notifications for demo
        function generateRandomNotifications() {
            const events = [
                { title: 'New Deposit', message: 'Deposit of 0.25 BTC received', type: 'success' },
                { title: 'Operator Status', message: 'Operator 03 is now offline', type: 'warning' },
                { title: 'System Alert', message: 'High memory usage detected', type: 'warning' },
                { title: 'Transaction Complete', message: 'Withdrawal WD-4521 completed', type: 'success' },
                { title: 'Bitcoin Reorg', message: 'Chain reorganization detected', type: 'info' },
                { title: 'API Rate Limit', message: 'API rate limit exceeded', type: 'error' }
            ];

            const randomEvent = events[Math.floor(Math.random() * events.length)];
            addNotification(randomEvent.title, randomEvent.message, randomEvent.type);
        }

        // Show settings modal
        function showSettingsModal() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.8); display: flex; align-items: center;
                justify-content: center; z-index: 1000;
            `;
            modal.innerHTML = `
                <div style="background: var(--darker); padding: 30px; border-radius: 16px; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto;">
                    <h2 style="color: var(--primary); margin-bottom: 25px; display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-cog"></i> Settings
                    </h2>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 25px;">
                        <!-- General Settings -->
                        <div>
                            <h3 style="color: var(--light); margin-bottom: 15px; font-size: 1rem;">General</h3>

                            <div style="margin-bottom: 15px;">
                                <label style="display: block; margin-bottom: 5px; color: var(--light); font-size: 0.9rem;">Theme</label>
                                <select id="themeSelect" style="width: 100%; padding: 8px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: white;">
                                    <option value="dark">Dark</option>
                                    <option value="light">Light</option>
                                </select>
                            </div>

                            <div style="margin-bottom: 15px;">
                                <label style="display: flex; align-items: center; gap: 8px; color: var(--light); font-size: 0.9rem; cursor: pointer;">
                                    <input type="checkbox" id="autoRefreshToggle" style="margin: 0;">
                                    Auto Refresh
                                </label>
                            </div>

                            <div style="margin-bottom: 15px;">
                                <label style="display: block; margin-bottom: 5px; color: var(--light); font-size: 0.9rem;">Refresh Interval (seconds)</label>
                                <input type="number" id="refreshInterval" min="10" max="300" style="width: 100%; padding: 8px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: white;">
                            </div>
                        </div>

                        <!-- Notifications -->
                        <div>
                            <h3 style="color: var(--light); margin-bottom: 15px; font-size: 1rem;">Notifications</h3>

                            <div style="margin-bottom: 15px;">
                                <label style="display: flex; align-items: center; gap: 8px; color: var(--light); font-size: 0.9rem; cursor: pointer;">
                                    <input type="checkbox" id="notificationsEnabled" style="margin: 0;">
                                    Enable Notifications
                                </label>
                            </div>

                            <div style="margin-bottom: 15px;">
                                <label style="display: flex; align-items: center; gap: 8px; color: var(--light); font-size: 0.9rem; cursor: pointer;">
                                    <input type="checkbox" id="notificationSound" style="margin: 0;">
                                    Sound Alerts
                                </label>
                            </div>

                            <div style="margin-bottom: 10px;">
                                <label style="display: block; margin-bottom: 8px; color: var(--light); font-size: 0.9rem;">Notification Types</label>
                                <div style="display: flex; flex-direction: column; gap: 5px;">
                                    <label style="display: flex; align-items: center; gap: 8px; color: var(--gray); font-size: 0.8rem; cursor: pointer;">
                                        <input type="checkbox" id="notifyDeposits" style="margin: 0;">
                                        Deposits
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 8px; color: var(--gray); font-size: 0.8rem; cursor: pointer;">
                                        <input type="checkbox" id="notifyWithdrawals" style="margin: 0;">
                                        Withdrawals
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 8px; color: var(--gray); font-size: 0.8rem; cursor: pointer;">
                                        <input type="checkbox" id="notifySystem" style="margin: 0;">
                                        System Alerts
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 8px; color: var(--gray); font-size: 0.8rem; cursor: pointer;">
                                        <input type="checkbox" id="notifyOperators" style="margin: 0;">
                                        Operator Status
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Display Settings -->
                        <div style="grid-column: span 2;">
                            <h3 style="color: var(--light); margin-bottom: 15px; font-size: 1rem;">Display</h3>

                            <div style="display: flex; gap: 20px;">
                                <label style="display: flex; align-items: center; gap: 8px; color: var(--light); font-size: 0.9rem; cursor: pointer;">
                                    <input type="checkbox" id="showCharts" style="margin: 0;">
                                    Show Charts by Default
                                </label>

                                <label style="display: flex; align-items: center; gap: 8px; color: var(--light); font-size: 0.9rem; cursor: pointer;">
                                    <input type="checkbox" id="compactView" style="margin: 0;">
                                    Compact View
                                </label>

                                <label style="display: flex; align-items: center; gap: 8px; color: var(--light); font-size: 0.9rem; cursor: pointer;">
                                    <input type="checkbox" id="animationsEnabled" style="margin: 0;">
                                    Enable Animations
                                </label>
                            </div>
                        </div>
                    </div>

                    <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 25px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1);">
                        <button onclick="resetSettings()" style="background: rgba(255,255,255,0.1); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;">Reset to Defaults</button>
                        <button onclick="this.parentElement.parentElement.parentElement.remove()" style="background: rgba(255,255,255,0.1); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;">Cancel</button>
                        <button onclick="saveSettings(); this.parentElement.parentElement.parentElement.remove()" style="background: var(--primary); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;">Save Settings</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);

            // Load current settings into form
            loadSettingsIntoForm();
        }

        // Load settings into form
        function loadSettingsIntoForm() {
            document.getElementById('themeSelect').value = userSettings.theme;
            document.getElementById('autoRefreshToggle').checked = userSettings.autoRefresh;
            document.getElementById('refreshInterval').value = userSettings.refreshInterval;
            document.getElementById('notificationsEnabled').checked = userSettings.notifications.enabled;
            document.getElementById('notificationSound').checked = userSettings.notifications.sound;
            document.getElementById('notifyDeposits').checked = userSettings.notifications.types.deposits;
            document.getElementById('notifyWithdrawals').checked = userSettings.notifications.types.withdrawals;
            document.getElementById('notifySystem').checked = userSettings.notifications.types.system;
            document.getElementById('notifyOperators').checked = userSettings.notifications.types.operators;
            document.getElementById('showCharts').checked = userSettings.display.showCharts;
            document.getElementById('compactView').checked = userSettings.display.compactView;
            document.getElementById('animationsEnabled').checked = userSettings.display.animations;
        }

        // Save settings
        function saveSettings() {
            userSettings.theme = document.getElementById('themeSelect').value;
            userSettings.autoRefresh = document.getElementById('autoRefreshToggle').checked;
            userSettings.refreshInterval = parseInt(document.getElementById('refreshInterval').value);
            userSettings.notifications.enabled = document.getElementById('notificationsEnabled').checked;
            userSettings.notifications.sound = document.getElementById('notificationSound').checked;
            userSettings.notifications.types.deposits = document.getElementById('notifyDeposits').checked;
            userSettings.notifications.types.withdrawals = document.getElementById('notifyWithdrawals').checked;
            userSettings.notifications.types.system = document.getElementById('notifySystem').checked;
            userSettings.notifications.types.operators = document.getElementById('notifyOperators').checked;
            userSettings.display.showCharts = document.getElementById('showCharts').checked;
            userSettings.display.compactView = document.getElementById('compactView').checked;
            userSettings.display.animations = document.getElementById('animationsEnabled').checked;

            // Save to localStorage
            localStorage.setItem('userSettings', JSON.stringify(userSettings));

            // Apply settings
            applySettings();

            addNotification('Settings Saved', 'Your preferences have been updated', 'success');
        }

        // Apply settings to the UI
        function applySettings() {
            // Apply theme
            if (userSettings.theme === 'light') {
                document.documentElement.style.setProperty('--darker', '#f8fafc');
                document.documentElement.style.setProperty('--dark', '#e2e8f0');
                document.documentElement.style.setProperty('--light', '#1e293b');
                document.documentElement.style.setProperty('--gray', '#64748b');
            } else {
                // Reset to dark theme
                document.documentElement.style.setProperty('--darker', '#0a0f1c');
                document.documentElement.style.setProperty('--dark', '#0f172a');
                document.documentElement.style.setProperty('--light', '#f9fafb');
                document.documentElement.style.setProperty('--gray', '#94a3b8');
            }

            // Apply chart visibility
            const chartsSection = document.getElementById('chartsSection');
            if (chartsSection) {
                chartsSection.style.display = userSettings.display.showCharts ? 'block' : 'none';
                const toggleText = document.getElementById('chartToggleText');
                if (toggleText) {
                    toggleText.textContent = userSettings.display.showCharts ? 'Hide Charts' : 'Show Charts';
                }
            }

            // Apply animations
            document.documentElement.style.setProperty('--transition', userSettings.display.animations ? 'all 0.3s ease' : 'none');
        }

        // Reset settings to defaults
        function resetSettings() {
            userSettings = {
                theme: 'dark',
                autoRefresh: true,
                refreshInterval: 30,
                notifications: {
                    enabled: true,
                    sound: false,
                    types: {
                        deposits: true,
                        withdrawals: true,
                        system: true,
                        operators: true
                    }
                },
                display: {
                    showCharts: false,
                    compactView: false,
                    animations: true
                }
            };

            localStorage.setItem('userSettings', JSON.stringify(userSettings));
            loadSettingsIntoForm();
            applySettings();
            addNotification('Settings Reset', 'All settings have been reset to defaults', 'info');
        }

        // Show logs modal
        function showLogsModal() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.8); display: flex; align-items: center;
                justify-content: center; z-index: 1000;
            `;
            modal.innerHTML = `
                <div style="background: var(--darker); padding: 30px; border-radius: 16px; max-width: 700px; width: 90%; max-height: 80vh; overflow-y: auto;">
                    <h3 style="color: var(--primary); margin-bottom: 20px;">System Logs</h3>
                    <pre style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 8px; font-size: 0.9rem; white-space: pre-wrap; color: var(--light);">
2024-01-15 14:30:15 - Relayer system started
2024-01-15 14:30:16 - Connected to Bitcoin network
2024-01-15 14:30:17 - Connected to Starknet network
2024-01-15 14:30:18 - Operator nodes: 5/7 online
2024-01-15 14:30:20 - Bitcoin height: 788,543
2024-01-15 14:30:25 - Starknet height: 788,412
2024-01-15 14:31:00 - New deposit request: DEP-7832 (0.25 BTC)
2024-01-15 14:31:05 - SPV proof generated for tx abc123
2024-01-15 14:31:10 - Proof submitted to Starknet
2024-01-15 14:31:15 - Deposit completed successfully
2024-01-15 14:32:00 - New withdrawal request: WD-4521 (0.35 BTC)
2024-01-15 14:32:05 - Multi-sig signing initiated
2024-01-15 14:32:10 - 3/5 signatures collected
2024-01-15 14:32:15 - Withdrawal broadcast to Bitcoin network
2024-01-15 14:32:20 - Withdrawal completed
2024-01-15 14:33:00 - System health check passed
2024-01-15 14:33:05 - Memory usage: 64%
2024-01-15 14:33:10 - CPU usage: 42%
2024-01-15 14:33:15 - Disk usage: 78%
                    </pre>
                    <button onclick="this.parentElement.parentElement.remove()" style="background: var(--primary); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; margin-top: 20px;">Close</button>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // Export transaction data
        function exportTransactionData() {
            const data = {
                timestamp: new Date().toISOString(),
                deposits: [],
                withdrawals: []
            };

            // Collect deposit data
            const depositRows = document.querySelectorAll('.table tbody tr');
            depositRows.forEach(row => {
                const cells = row.querySelectorAll('td');
                if (cells.length >= 4) {
                    data.deposits.push({
                        id: cells[0].textContent,
                        amount: cells[1].textContent,
                        status: cells[2].textContent.trim(),
                        time: cells[3].textContent
                    });
                }
            });

            // Collect withdrawal data
            const withdrawalRows = document.querySelectorAll('.table tbody')[1]?.querySelectorAll('tr');
            if (withdrawalRows) {
                withdrawalRows.forEach(row => {
                    const cells = row.querySelectorAll('td');
                    if (cells.length >= 3) {
                        data.withdrawals.push({
                            id: cells[0].textContent,
                            amount: cells[1].textContent,
                            status: cells[2].textContent.trim()
                        });
                    }
                });
            }

            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'bridge-transactions-export.json';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Show add node modal
        function showAddNodeModal() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.8); display: flex; align-items: center;
                justify-content: center; z-index: 1000;
            `;
            modal.innerHTML = `
                <div style="background: var(--darker); padding: 30px; border-radius: 16px; max-width: 500px; width: 90%;">
                    <h3 style="color: var(--primary); margin-bottom: 20px;">Add Operator Node</h3>
                    <form id="addNodeForm">
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; color: var(--light);">Node Name</label>
                            <input type="text" placeholder="Operator 05" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: white;">
                        </div>
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; color: var(--light);">Location</label>
                            <input type="text" placeholder="New York, USA" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: white;">
                        </div>
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; color: var(--light);">Bond Amount (BTC)</label>
                            <input type="number" step="0.1" placeholder="2.0" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: white;">
                        </div>
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 5px; color: var(--light);">Public Key</label>
                            <input type="text" placeholder="0x..." style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: white;">
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <button type="submit" style="flex: 1; background: var(--primary); color: white; border: none; padding: 12px; border-radius: 8px; cursor: pointer;">Add Node</button>
                            <button type="button" onclick="this.parentElement.parentElement.parentElement.remove()" style="background: rgba(255,255,255,0.1); color: white; border: none; padding: 12px; border-radius: 8px; cursor: pointer;">Cancel</button>
                        </div>
                    </form>
                </div>
            `;
            document.body.appendChild(modal);

            // Handle form submission
            document.getElementById('addNodeForm').addEventListener('submit', function(e) {
                e.preventDefault();
                alert('Operator node added successfully! (This is a simulation)');
                modal.remove();
            });
        }

        // Generate API key
        function generateApiKey() {
            const apiKey = 'sk_' + Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);
            alert(`New API Key Generated:\n\n${apiKey}\n\nKeep this key secure!`);
        }

        // Show all withdrawals modal
        function showAllWithdrawalsModal() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.8); display: flex; align-items: center;
                justify-content: center; z-index: 1000;
            `;
            modal.innerHTML = `
                <div style="background: var(--darker); padding: 30px; border-radius: 16px; max-width: 800px; width: 90%; max-height: 80vh; overflow-y: auto;">
                    <h3 style="color: var(--primary); margin-bottom: 20px;">All Withdrawal Requests</h3>
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="border-bottom: 1px solid rgba(255,255,255,0.1);">
                                <th style="text-align: left; padding: 10px; color: var(--gray);">ID</th>
                                <th style="text-align: left; padding: 10px; color: var(--gray);">Amount</th>
                                <th style="text-align: left; padding: 10px; color: var(--gray);">Status</th>
                                <th style="text-align: left; padding: 10px; color: var(--gray);">Time</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr style="border-bottom: 1px solid rgba(255,255,255,0.05);">
                                <td style="padding: 10px;">WD-4521</td>
                                <td style="padding: 10px;">0.35 BTC</td>
                                <td style="padding: 10px;"><span class="status-badge status-processing"><i class="fas fa-spinner fa-spin"></i> Signing</span></td>
                                <td style="padding: 10px;">2 hours ago</td>
                            </tr>
                            <tr style="border-bottom: 1px solid rgba(255,255,255,0.05);">
                                <td style="padding: 10px;">WD-4520</td>
                                <td style="padding: 10px;">1.20 BTC</td>
                                <td style="padding: 10px;"><span class="status-badge status-pending"><i class="fas fa-clock"></i> Awaiting Signatures</span></td>
                                <td style="padding: 10px;">4 hours ago</td>
                            </tr>
                            <tr style="border-bottom: 1px solid rgba(255,255,255,0.05);">
                                <td style="padding: 10px;">WD-4519</td>
                                <td style="padding: 10px;">0.75 BTC</td>
                                <td style="padding: 10px;"><span class="status-badge status-completed"><i class="fas fa-check-circle"></i> Completed</span></td>
                                <td style="padding: 10px;">6 hours ago</td>
                            </tr>
                        </tbody>
                    </table>
                    <button onclick="this.parentElement.parentElement.remove()" style="background: var(--primary); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; margin-top: 20px;">Close</button>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // Test API endpoint
        async function testEndpoint(endpoint) {
            const responseDiv = document.getElementById(`response_${endpoint}`);
            const testButton = event.target.closest('button');

            if (!responseDiv) return;

            // Show loading state
            const originalText = testButton.innerHTML;
            testButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Testing...';
            testButton.disabled = true;
            testButton.classList.add('loading');

            // Clear previous response
            responseDiv.style.display = 'none';
            responseDiv.innerHTML = '';

            try {
                let response, status, data;

                switch (endpoint) {
                    case 'deposit_notify':
                        // Simulate POST request
                        await new Promise(resolve => setTimeout(resolve, 1000));
                        status = 200;
                        data = {
                            success: true,
                            deposit_id: "dep_" + Math.random().toString(36).substring(2, 8),
                            status: "received",
                            message: "Deposit notification received successfully"
                        };
                        break;

                    case 'deposit_status':
                        // Simulate GET request
                        await new Promise(resolve => setTimeout(resolve, 800));
                        status = 200;
                        data = {
                            deposit_id: "DEP-7832",
                            status: "completed",
                            amount: "0.25 BTC",
                            confirmations: 6,
                            created_at: new Date().toISOString(),
                            completed_at: new Date(Date.now() - 3600000).toISOString()
                        };
                        break;

                    case 'system_health':
                        // Simulate GET request
                        await new Promise(resolve => setTimeout(resolve, 600));
                        status = 200;
                        data = {
                            status: "healthy",
                            bitcoin_sync: { height: 788543, progress: 100 },
                            starknet_sync: { height: 788412, progress: 100 },
                            operators_online: 5,
                            total_operators: 7,
                            system_load: { cpu: 42, memory: 64, disk: 78 },
                            last_updated: new Date().toISOString()
                        };
                        break;

                    default:
                        throw new Error('Unknown endpoint');
                }

                // Display response
                responseDiv.innerHTML = `
                    <div class="response-header">
                        <span style="color: var(--secondary);"><i class="fas fa-check-circle"></i> Response (${status})</span>
                        <button onclick="this.parentElement.parentElement.style.display='none'" style="background: none; border: none; color: var(--gray); cursor: pointer; font-size: 0.8rem;">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <pre style="color: var(--light); margin: 0; white-space: pre-wrap;">${JSON.stringify(data, null, 2)}</pre>
                `;
                responseDiv.className = 'api-response success';
                responseDiv.style.display = 'block';

            } catch (error) {
                // Display error
                responseDiv.innerHTML = `
                    <div class="response-header">
                        <span style="color: var(--danger);"><i class="fas fa-exclamation-triangle"></i> Error</span>
                        <button onclick="this.parentElement.parentElement.style.display='none'" style="background: none; border: none; color: var(--gray); cursor: pointer; font-size: 0.8rem;">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <pre style="color: var(--danger); margin: 0;">${error.message}</pre>
                `;
                responseDiv.className = 'api-response error';
                responseDiv.style.display = 'block';
            }

            // Reset button
            testButton.innerHTML = originalText;
            testButton.disabled = false;
            testButton.classList.remove('loading');
        }
    </script>
</body>
</html>